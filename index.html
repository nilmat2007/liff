<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIFF Flex Message Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" />
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
    }
  </style>
</head>

<body>
  <div class="container py-5">
    <h1 class="mb-4">LIFF Flex Message Demo</h1>
    <p class="lead">Select a Flex Message to share via LIFF.</p>
    <div class="form-group">
      <label for="flexSelect">Select Flex Message:</label>
      <select class="form-control" id="flexSelect">
        <option value="-1" selected>-- Select an option --</option>
      </select>
    </div>
    <button id="shareBtn" class="btn btn-primary btn-lg mt-3">Share</button>
  </div>

  <script>
    // Initialize LIFF
    liff
      .init({ liffId: "2005615503-1Kkm9Dgr" })
      .then(() => {
        console.log("LIFF Initialized");
      })
      .catch((err) => {
        console.log("LIFF Initialization failed:", err);
      });

    // Array of Flex Messages
    const flexMessages = [
      {
        "type": "flex",
        "altText": "à¸¥à¸‡à¸Šà¸·à¹ˆà¸­TTS",
        "contents": {
  "type": "bubble",
  "footer": {
    "contents": [
      {
        "action": {
          "label": "à¹€à¸Šà¹‡à¸„à¸Šà¸·à¹ˆà¸­à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/ttscheck/"
        },
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "contents": [
          {
            "action": {
              "label": "à¹€à¸žà¸´à¹ˆà¸¡à¸Šà¸·à¹ˆà¸­à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™TTS",
              "type": "uri",
              "uri": "https://nilmat2007.github.io/TTS/"
            },
            "height": "sm",
            "position": "relative",
            "style": "primary",
            "type": "button"
          }
        ],
        "flex": 0,
        "layout": "vertical",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "https://nilmat2007.github.io/order/"
    },
    "aspectMode": "cover",
    "aspectRatio": "2:1",
    "size": "full",
    "type": "image",
    "url": "https://lh3.googleusercontent.com/d/14sgCv8QvDklT4NMJVabXz964TmN-qQ4Y"
  }
}
      },
      {
        "type": "flex",
        "altText": "nano",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xl",
        "text": "Nano Fulfillment",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "color": "#aaaaaa",
            "flex": 1,
            "size": "sm",
            "text": "à¹à¸™à¸°à¸™à¸³",
            "type": "text"
          },
          {
            "color": "#666666",
            "flex": 5,
            "size": "sm",
            "text": "- à¹€à¸Šà¹‡à¸„à¸„à¸¥à¸±à¸‡à¸à¹ˆà¸­à¸™à¸ªà¸±à¹ˆà¸‡à¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#666666",
            "flex": 5,
            "size": "sm",
            "text": "- à¸«à¸²à¸à¸ªà¸±à¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²à¹à¸¥à¹‰à¸§ à¹€à¸à¸´à¸™ 5 à¸™à¸²à¸—à¸µ à¹„à¸¡à¹ˆà¸¡à¸µ line notify à¹à¸ˆà¹‰à¸‡à¹„à¸”à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#666666",
            "size": "sm",
            "text": "- à¸„à¸£à¸µà¸¡à¸à¸±à¸™à¹à¸”à¸”à¹à¸¥à¸à¹„à¸”à¹‰à¹à¸¥à¹‰à¸§à¸„à¸£à¸±à¸š",
            "type": "text"
          },
          {
            "color": "#666666",
            "size": "sm",
            "text": "à¹€à¸§à¸¥à¸²: 08:00 - 18:00",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#FF0000",
            "size": "md",
            "text": "**à¸ªà¸´à¸™à¸„à¹‰à¸²à¸•à¸±à¸§à¹„à¸«à¸™à¹ƒà¸à¸¥à¹‰à¸«à¸¡à¸”à¸£à¸šà¸à¸§à¸™à¹à¸ˆà¹‰à¸‡à¹„à¸”à¹‰à¹€à¸¥à¸¢à¸™à¸°à¸„à¸£à¸±à¸š**",
            "type": "text",
            "weight": "bold",
            "wrap": true
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "à¸à¸”à¹€à¸Šà¹‡à¸„à¸„à¸¥à¸±à¸‡",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/micro/"
        },
        "color": "#00bfff",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "à¸ªà¸±à¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/nano/"
        },
        "color": "#ff6347",
        "style": "primary",
        "type": "button"
      }
    ],
    "layout": "horizontal",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "http://linecorp.com/"
    },
    "aspectMode": "cover",
    "aspectRatio": "20:13",
    "size": "full",
    "type": "image",
    "url": "https://img5.pic.in.th/file/secure-sv1/D110576E-70FB-469B-A9C1-B2A20B8CE4E7.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "Coach B(à¹‚à¸„à¹‰à¸Šà¸šà¸µ)",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xxl",
        "text": "Coach B(à¹‚à¸„à¹‰à¸Šà¸šà¸µ)",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "contents": [
              {
                "color": "#aaaaaa",
                "flex": 1,
                "size": "sm",
                "text": "à¹à¸™à¸°à¸™à¸³",
                "type": "text"
              },
              {
                "color": "#666666",
                "flex": 5,
                "size": "sm",
                "text": "à¸„à¸£à¸¹à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥",
                "type": "text",
                "wrap": true
              }
            ],
            "layout": "horizontal",
            "spacing": "sm",
            "type": "box"
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "ðŸ“ž 0989528254",
          "type": "uri",
          "uri": "tel:0989528254"
        },
        "color": "#E18AAA",
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Line",
          "type": "uri",
          "uri": "https://line.me/ti/p/aUlf04PA9j"
        },
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Facebook",
          "type": "uri",
          "uri": "https://www.facebook.com/pheemthaphat.nilmat?mibextid=ibOpuV"
        },
        "color": "#3b5998",
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "https://www.facebook.com/pheemthaphat.nilmat?mibextid=ibOpuV"
    },
    "aspectMode": "cover",
    "aspectRatio": "1:1",
    "size": "full",
    "type": "image",
    "url": "https://img2.pic.in.th/pic/-3a2b8b71a0c59bd6b.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "à¹‚à¸„à¹‰à¸Šà¸ˆà¸µà¸ˆà¸µà¹‰",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xl",
        "text": "Coach Jeejy (à¹‚à¸„à¹‰à¸Šà¸ˆà¸µà¸ˆà¸µà¹‰)",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "contents": [
              {
                "color": "#aaaaaa",
                "flex": 1,
                "size": "sm",
                "text": "à¹‚à¸—à¸£:",
                "type": "text"
              },
              {
                "color": "#666666",
                "flex": 5,
                "size": "sm",
                "text": "090-970-6188",
                "type": "text",
                "wrap": true
              }
            ],
            "layout": "baseline",
            "spacing": "sm",
            "type": "box"
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "à¹‚à¸—à¸£",
          "type": "uri",
          "uri": "tel:0909706188"
        },
        "color": "#E18AAA",
        "height": "sm",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Line",
          "type": "uri",
          "uri": "https://line.me/ti/p/3o_pCESEji"
        },
        "height": "sm",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Facebook",
          "type": "uri",
          "uri": "https://www.facebook.com/jiranun.janchuen?mibextid=ibOpuV"
        },
        "color": "#3b5998",
        "height": "sm",
        "style": "primary",
        "type": "button"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "aspectMode": "cover",
    "aspectRatio": "1:1",
    "size": "full",
    "type": "image",
    "url": "https://img5.pic.in.th/file/secure-sv1/-2383b8d3975116199.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "Location à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™",
        "contents": {
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://lh3.googleusercontent.com/d/1_wGT99SHmN-zMLYLJChe7wCk2Y6EZuuR",
    "size": "full",
    "aspectRatio": "1:1",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://example.com/location"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "spacing": "md",
    "contents": [
      {
        "type": "text",
        "text": "à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸ªà¸­à¸™à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œà¸„à¸£à¸¹à¸›à¸±à¸™",
        "wrap": true,
        "weight": "bold",
        "size": "xl",
        "color": "#000000"
      },
      {
        "type": "text",
        "text": "à¹€à¸§à¸¥à¸² 09.00 à¸™. - 18.00 à¸™.",
        "wrap": true,
        "size": "md",
        "color": "#666666"
      },
      {
        "type": "box",
        "layout": "horizontal",
        "contents": [
          {
            "type": "text",
            "text": "Rating:",
            "size": "sm",
            "color": "#999999"
          },
          {
            "type": "text",
            "text": "â˜…â˜…â˜…â˜…â˜…",
            "size": "sm",
            "color": "#FFCC00"
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "action": {
          "type": "uri",
          "label": "Google Map",
          "uri": "https://example.com/navigate"
        },
        "height": "sm",
        "style": "primary",
        "color": "#1DB446"
      }
    ]
  }
}
      },
      // add more flex message objects as needed
    ];

    // Create options for the dropdown
    const flexSelect = document.getElementById('flexSelect');
    flexMessages.forEach((flexMessage, index) => {
      const option = document.createElement('option');
      option.value = index;
      option.text = `Flex Message ${index + 1} (${flexMessage.altText})`;
      flexSelect.add(option);
    });

    // Function to share Flex Message
    const shareFlexMessage = () => {
      if (!liff.isLoggedIn()) {
        liff.login();
      }

      const selectedIndex = document.getElementById('flexSelect').value;

      // à¸–à¹‰à¸²à¹€à¸¥à¸·à¸­à¸à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ à¸ªà¹ˆà¸‡ flex message à¸—à¸µà¹ˆà¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸™à¸±à¹‰à¸™
      if (selectedIndex >= 0 && selectedIndex < flexMessages.length) {
        liff
          .shareTargetPicker([flexMessages[selectedIndex]])
          .then((res) => {
            if (res) {
              console.log(`[${res.status}] Message sent!`);
            } else {
              console.log("TargetPicker was closed!");
            }
          })
          .catch((error) => {
            console.log("Something went wrong:", error);
          });
      } else {
        console.log("Please select a Flex Message.");
      }
    };

    // Add click event listener to share button
    document.getElementById("shareBtn").addEventListener("click", shareFlexMessage);
  </script>
</body>

</html>
