<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LIFF Flex Message Demo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" />
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  </head>
  <body>
    <div class="container py-5">
      <h1>LIFF Flex Message Demo</h1>
      <p>Click the button below to share a Flex Message via LIFF.</p>
      <button id="shareBtn" class="btn btn-primary btn-lg">Share</button>
    </div>

    <script>
      // ตั้งค่า LIFF Initialize
      liff.init({ liffId: "2005615503-1Kkm9Dgr" }).then(() => {
        console.log("LIFF Initialized");
      });

      // Flex Message
      const flexMessage = {
        type: "flex",
        altText: "This is a Flex Message",
        contents: {
          type: "bubble",
          body: {
            type: "box",
            layout: "horizontal",
            contents: [
              {
                type: "text",
                text: "Hello",
                weight: "bold",
                size: "xl",
              },
              {
                type: "text",
                text: " World!",
                weight: "bold",
                size: "xl",
              },
            ],
          },
        },
      };

      // ฟังก์ชันสำหรับ Share Flex Message
      const shareFlexMessage = () => {
        liff
          .shareTargetPicker([flexMessage])
          .then((res) => {
            if (res) {
              console.log(`[${res.status}] Message sent!`);
            } else {
              console.log("TargetPicker was closed!");
            }
          })
          .catch((error) => {
            console.log("Something went wrong");
          });
      };

      // กำหนดให้ปุ่ม Share เรียกใช้ฟังก์ชัน shareFlexMessage
      document.getElementById("shareBtn").addEventListener("click", shareFlexMessage);
    </script>
  </body>
</html>
