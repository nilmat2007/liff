<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIFF Flex Message Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" />
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
    }
  </style>
</head>

<body>
  <div class="container py-5">
    <h1 class="mb-4">LIFF Flex Message Demo</h1>
    <p class="lead">Select a Flex Message to share via LIFF.</p>
    <div class="form-group">
      <label for="flexSelect">Select Flex Message:</label>
      <select class="form-control" id="flexSelect">
        <option value="-1" selected>-- Select an option --</option>
      </select>
    </div>
    <button id="shareBtn" class="btn btn-primary btn-lg mt-3">Share</button>
  </div>

  <script>
    // Initialize LIFF
    liff
      .init({ liffId: "2005615503-1Kkm9Dgr" })
      .then(() => {
        console.log("LIFF Initialized");
      })
      .catch((err) => {
        console.log("LIFF Initialization failed:", err);
      });

    // Array of Flex Messages
    const flexMessages = [
      {
        "type": "flex",
        "altText": "‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠TTS",
        "contents": {
  "type": "bubble",
  "footer": {
    "contents": [
      {
        "action": {
          "label": "‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/ttscheck/"
        },
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "contents": [
          {
            "action": {
              "label": "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ôTTS",
              "type": "uri",
              "uri": "https://nilmat2007.github.io/TTS/"
            },
            "height": "sm",
            "position": "relative",
            "style": "primary",
            "type": "button"
          }
        ],
        "flex": 0,
        "layout": "vertical",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "https://nilmat2007.github.io/order/"
    },
    "aspectMode": "cover",
    "aspectRatio": "2:1",
    "size": "full",
    "type": "image",
    "url": "https://lh3.googleusercontent.com/d/14sgCv8QvDklT4NMJVabXz964TmN-qQ4Y"
  }
}
      },
      {
        "type": "flex",
        "altText": "nano",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xl",
        "text": "Nano Fulfillment",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "color": "#aaaaaa",
            "flex": 1,
            "size": "sm",
            "text": "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥",
            "type": "text"
          },
          {
            "color": "#666666",
            "flex": 5,
            "size": "sm",
            "text": "- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏•‡∏±‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#666666",
            "flex": 5,
            "size": "sm",
            "text": "- ‡∏´‡∏≤‡∏Å‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ line notify ‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#666666",
            "size": "sm",
            "text": "- ‡∏Ñ‡∏£‡∏µ‡∏°‡∏Å‡∏±‡∏ô‡πÅ‡∏î‡∏î‡πÅ‡∏•‡∏Å‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö",
            "type": "text"
          },
          {
            "color": "#666666",
            "size": "sm",
            "text": "‡πÄ‡∏ß‡∏•‡∏≤: 08:00 - 18:00",
            "type": "text",
            "wrap": true
          },
          {
            "color": "#FF0000",
            "size": "md",
            "text": "**‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö**",
            "type": "text",
            "weight": "bold",
            "wrap": true
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "‡∏Å‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏•‡∏±‡∏á",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/micro/"
        },
        "color": "#00bfff",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",
          "type": "uri",
          "uri": "https://nilmat2007.github.io/nano/"
        },
        "color": "#ff6347",
        "style": "primary",
        "type": "button"
      }
    ],
    "layout": "horizontal",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "http://linecorp.com/"
    },
    "aspectMode": "cover",
    "aspectRatio": "20:13",
    "size": "full",
    "type": "image",
    "url": "https://img5.pic.in.th/file/secure-sv1/D110576E-70FB-469B-A9C1-B2A20B8CE4E7.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "Coach B(‡πÇ‡∏Ñ‡πâ‡∏ä‡∏ö‡∏µ)",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xxl",
        "text": "Coach B(‡πÇ‡∏Ñ‡πâ‡∏ä‡∏ö‡∏µ)",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "contents": [
              {
                "color": "#aaaaaa",
                "flex": 1,
                "size": "sm",
                "text": "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥",
                "type": "text"
              },
              {
                "color": "#666666",
                "flex": 5,
                "size": "sm",
                "text": "‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•",
                "type": "text",
                "wrap": true
              }
            ],
            "layout": "horizontal",
            "spacing": "sm",
            "type": "box"
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "üìû 0989528254",
          "type": "uri",
          "uri": "tel:0989528254"
        },
        "color": "#E18AAA",
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Line",
          "type": "uri",
          "uri": "https://line.me/ti/p/aUlf04PA9j"
        },
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Facebook",
          "type": "uri",
          "uri": "https://www.facebook.com/pheemthaphat.nilmat?mibextid=ibOpuV"
        },
        "color": "#3b5998",
        "height": "sm",
        "position": "relative",
        "style": "primary",
        "type": "button"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "action": {
      "type": "uri",
      "uri": "https://www.facebook.com/pheemthaphat.nilmat?mibextid=ibOpuV"
    },
    "aspectMode": "cover",
    "aspectRatio": "1:1",
    "size": "full",
    "type": "image",
    "url": "https://img2.pic.in.th/pic/-3a2b8b71a0c59bd6b.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "‡πÇ‡∏Ñ‡πâ‡∏ä‡∏à‡∏µ‡∏à‡∏µ‡πâ",
        "contents": {
  "type": "bubble",
  "body": {
    "contents": [
      {
        "size": "xl",
        "text": "Coach Jeejy (‡πÇ‡∏Ñ‡πâ‡∏ä‡∏à‡∏µ‡∏à‡∏µ‡πâ)",
        "type": "text",
        "weight": "bold"
      },
      {
        "contents": [
          {
            "contents": [
              {
                "color": "#aaaaaa",
                "flex": 1,
                "size": "sm",
                "text": "‡πÇ‡∏ó‡∏£:",
                "type": "text"
              },
              {
                "color": "#666666",
                "flex": 5,
                "size": "sm",
                "text": "090-970-6188",
                "type": "text",
                "wrap": true
              }
            ],
            "layout": "baseline",
            "spacing": "sm",
            "type": "box"
          }
        ],
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "type": "box"
      }
    ],
    "layout": "vertical",
    "type": "box"
  },
  "footer": {
    "contents": [
      {
        "action": {
          "label": "‡πÇ‡∏ó‡∏£",
          "type": "uri",
          "uri": "tel:0909706188"
        },
        "color": "#E18AAA",
        "height": "sm",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Line",
          "type": "uri",
          "uri": "https://line.me/ti/p/3o_pCESEji"
        },
        "height": "sm",
        "style": "primary",
        "type": "button"
      },
      {
        "action": {
          "label": "Facebook",
          "type": "uri",
          "uri": "https://www.facebook.com/jiranun.janchuen?mibextid=ibOpuV"
        },
        "color": "#3b5998",
        "height": "sm",
        "style": "primary",
        "type": "button"
      }
    ],
    "flex": 0,
    "layout": "vertical",
    "spacing": "sm",
    "type": "box"
  },
  "hero": {
    "aspectMode": "cover",
    "aspectRatio": "1:1",
    "size": "full",
    "type": "image",
    "url": "https://img5.pic.in.th/file/secure-sv1/-2383b8d3975116199.png"
  }
}
      },
      {
        "type": "flex",
        "altText": "Location ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        "contents": {
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://lh3.googleusercontent.com/d/1_wGT99SHmN-zMLYLJChe7wCk2Y6EZuuR",
    "size": "full",
    "aspectRatio": "1:1",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://example.com/location"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "spacing": "md",
    "contents": [
      {
        "type": "text",
        "text": "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≠‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Ñ‡∏£‡∏π‡∏õ‡∏±‡∏ô",
        "wrap": true,
        "weight": "bold",
        "size": "xl",
        "color": "#000000"
      },
      {
        "type": "text",
        "text": "‡πÄ‡∏ß‡∏•‡∏≤ 09.00 ‡∏ô. - 18.00 ‡∏ô.",
        "wrap": true,
        "size": "md",
        "color": "#666666"
      },
      {
        "type": "box",
        "layout": "horizontal",
        "contents": [
          {
            "type": "text",
            "text": "Rating:",
            "size": "sm",
            "color": "#999999"
          },
          {
            "type": "text",
            "text": "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
            "size": "sm",
            "color": "#FFCC00"
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "action": {
          "type": "uri",
          "label": "Google Map",
          "uri": "https://example.com/navigate"
        },
        "height": "sm",
        "style": "primary",
        "color": "#1DB446"
      }
    ]
  }
}
      },
      // add more flex message objects as needed
    ];

    // Create options for the dropdown
    const flexSelect = document.getElementById('flexSelect');
    flexMessages.forEach((flexMessage, index) => {
      const option = document.createElement('option');
      option.value = index;
      option.text = `Flex Message ${index + 1} (${flexMessage.altText})`;
      flexSelect.add(option);
    });

    // Function to share Flex Message
    const shareFlexMessage = () => {
      if (!liff.isLoggedIn()) {
        liff.login();
      }

      const selectedIndex = document.getElementById('flexSelect').value;

      // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏™‡πà‡∏á flex message ‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏±‡πâ‡∏ô
      if (selectedIndex >= 0 && selectedIndex < flexMessages.length) {
        liff
          .shareTargetPicker([flexMessages[selectedIndex]])
          .then((res) => {
            if (res) {
              console.log(`[${res.status}] Message sent!`);
            } else {
              console.log("TargetPicker was closed!");
            }
          })
          .catch((error) => {
            console.log("Something went wrong:", error);
          });
      } else {
        console.log("Please select a Flex Message.");
      }
    };

    // Add click event listener to share button
    document.getElementById("shareBtn").addEventListener("click", shareFlexMessage);
  </script>
</body>

</html>
